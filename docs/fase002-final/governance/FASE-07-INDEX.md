# FASE 7: Governance (Blockchain) - √çndice de Refer√™ncia R√°pida

**Navega√ß√£o r√°pida** para encontrar informa√ß√µes espec√≠ficas na documenta√ß√£o da FASE 7.

---

## üìö Documentos Principais

| Documento | Descri√ß√£o | Link |
|-----------|-----------|------|
| **Especifica√ß√£o T√©cnica** | Documenta√ß√£o completa de arquitetura, configura√ß√£o e implementa√ß√£o | [FASE-07-GOVERNANCE-BLOCKCHAIN.md](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md) |
| **Prompts de Execu√ß√£o** | 10 prompts sequenciais para implementar a fase | [FASE-07-PROMPT.md](spec/FASE-07-PROMPT.md) |
| **README** | Overview e guia de in√≠cio r√°pido | [FASE-07-README.md](FASE-07-README.md) |
| **√çndice** | Este documento | FASE-07-INDEX.md |

---

## üîç Busca R√°pida por T√≥pico

### Blockchain / Runtime

| T√≥pico | Localiza√ß√£o |
|--------|-------------|
| Lista de pallets e prop√≥sito | [Spec ¬ß 2.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#21-pallets-a-serem-configurados) |
| Configura√ß√£o Treasury | [Spec ¬ß 2.1.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#211-pallet-treasury) |
| Configura√ß√£o Democracy | [Spec ¬ß 2.1.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#212-pallet-democracy) |
| Configura√ß√£o Collective | [Spec ¬ß 2.1.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#213-pallet-collective-council--technical-committee) |
| Configura√ß√£o Multisig | [Spec ¬ß 2.1.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#214-pallet-multisig) |
| Cargo.toml dependencies | [Spec ¬ß 2.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#23-cargotoml-updates) |
| construct_runtime! macro | [Spec ¬ß 2.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#24-construct_runtime-macro) |
| Testes blockchain | [Spec ¬ß 7.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#71-blockchain-tests) |
| Deployment blockchain | [Spec ¬ß 8.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#81-blockchain-deployment) |

### Backend API

| T√≥pico | Localiza√ß√£o |
|--------|-------------|
| Estrutura de arquivos | [Spec ¬ß 3.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#31-estrutura-de-arquivos) |
| Prisma schema completo | [Spec ¬ß 3.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#32-prisma-schema-extensions) |
| Endpoints Democracy | [Spec ¬ß 3.3.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#331-democracy-proposals) |
| Endpoints Treasury | [Spec ¬ß 3.3.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#332-treasury) |
| Endpoints Council | [Spec ¬ß 3.3.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#333-council) |
| Endpoints Multisig | [Spec ¬ß 3.3.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#334-multisig) |
| Event listeners | [Spec ¬ß 3.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#34-blockchain-event-listeners) |
| Valida√ß√µes backend | [Spec ¬ß 6.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#61-backend-validations) |
| Testes backend | [Spec ¬ß 7.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#72-backend-integration-tests) |

### Frontend

| T√≥pico | Localiza√ß√£o |
|--------|-------------|
| Estrutura de arquivos | [Spec ¬ß 4.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#41-estrutura-de-arquivos) |
| Rotas | [Spec ¬ß 4.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#42-rotas) |
| P√°ginas principais | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| Componentes reutiliz√°veis | [Spec ¬ß 4.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#44-componentes-reutiliz√°veis) |
| API client | [Spec ¬ß 4.5](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#45-api-client-governanceapits) |
| Valida√ß√µes frontend | [Spec ¬ß 6.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#62-frontend-validations) |
| Testes frontend | [Spec ¬ß 7.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#73-frontend-component-tests) |

### Fluxos de Usu√°rio

| Fluxo | Localiza√ß√£o |
|-------|-------------|
| Criar e votar em Democracy Proposal | [Spec ¬ß 5.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#51-criar-e-votar-em-democracy-proposal) |
| Criar Treasury Proposal | [Spec ¬ß 5.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#52-criar-treasury-proposal) |
| Multisig Operation | [Spec ¬ß 5.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#53-multisig-operation) |

### Seguran√ßa & Documenta√ß√£o

| T√≥pico | Localiza√ß√£o |
|--------|-------------|
| Seguran√ßa e valida√ß√µes | [Spec ¬ß 6](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#6-seguran√ßa-e-valida√ß√µes) |
| Permiss√µes | [Spec ¬ß 6.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#63-permiss√µes) |
| Testes | [Spec ¬ß 7](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#7-testes) |
| Deployment | [Spec ¬ß 8](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#8-deployment) |
| Documenta√ß√£o | [Spec ¬ß 9](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#9-documenta√ß√£o) |
| Riscos e mitiga√ß√µes | [Spec ¬ß 10](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#10-riscos-e-mitiga√ß√µes) |

---

## üéØ Busca por Prompt de Execu√ß√£o

| Prompt | T√≠tulo | Dura√ß√£o | Link |
|--------|--------|---------|------|
| 1 | Runtime Dependencies & Basic Configuration | 12h | [Prompt 1](spec/FASE-07-PROMPT.md#prompt-1-12h-runtime-dependencies--basic-configuration) |
| 2 | Configure Scheduler & Preimage Pallets | 16h | [Prompt 2](spec/FASE-07-PROMPT.md#prompt-2-16h-configure-scheduler--preimage-pallets) |
| 3 | Configure Treasury Pallet | 20h | [Prompt 3](spec/FASE-07-PROMPT.md#prompt-3-20h-configure-treasury-pallet) |
| 4 | Configure Multisig Pallet | 18h | [Prompt 4](spec/FASE-07-PROMPT.md#prompt-4-18h-configure-multisig-pallet) |
| 5 | Configure Collective Pallets | 24h | [Prompt 5](spec/FASE-07-PROMPT.md#prompt-5-24h-configure-collective-pallets-council--technical) |
| 6 | Configure Democracy Pallet | 28h | [Prompt 6](spec/FASE-07-PROMPT.md#prompt-6-28h-configure-democracy-pallet) |
| 7 | Build & Deploy Testnet | 8h | [Prompt 7](spec/FASE-07-PROMPT.md#prompt-7-8h-build--deploy-testnet) |
| 8 | Backend API Implementation | 48h | [Prompt 8](spec/FASE-07-PROMPT.md#prompt-8-48h-backend-api-implementation) |
| 9 | Frontend Pages Implementation | 32h | [Prompt 9](spec/FASE-07-PROMPT.md#prompt-9-32h-frontend-pages-implementation) |
| 10 | Translations & Documentation | 8h | [Prompt 10](spec/FASE-07-PROMPT.md#prompt-10-8h-translations--documentation) |

---

## üìä Par√¢metros-chave de Configura√ß√£o

### Treasury
```rust
ProposalBond: 5%
ProposalBondMinimum: 100 BZR
ProposalBondMaximum: 500 BZR
SpendPeriod: 7 dias
Burn: 1%
MaxApprovals: 100
```

### Democracy
```rust
LaunchPeriod: 7 dias
VotingPeriod: 7 dias
FastTrackVotingPeriod: 1 dia
MinimumDeposit: 100 ZARI
EnactmentPeriod: 2 dias
CooloffPeriod: 7 dias
MaxVotes: 100
MaxProposals: 100
```

### Council
```rust
CouncilMotionDuration: 7 dias
CouncilMaxProposals: 100
CouncilMaxMembers: 13
```

### Technical Committee
```rust
TechnicalMotionDuration: 3 dias
TechnicalMaxProposals: 100
TechnicalMaxMembers: 7
```

### Multisig
```rust
DepositBase: 1 BZR
DepositFactor: 0.1 BZR por signat√°rio
MaxSignatories: 20
```

---

## üîó APIs REST

### Democracy
```
POST   /governance/proposals/democracy
GET    /governance/proposals
GET    /governance/proposals/:id
POST   /governance/proposals/:id/second
POST   /governance/proposals/:id/vote
```

### Treasury
```
POST   /governance/treasury/proposals
GET    /governance/treasury/balance
POST   /governance/treasury/proposals/:id/approve
POST   /governance/treasury/proposals/:id/reject
```

### Council
```
GET    /governance/council/members
POST   /governance/council/motions
POST   /governance/council/motions/:hash/vote
```

### Multisig
```
POST   /governance/multisig/create
POST   /governance/multisig/:address/transactions
POST   /governance/multisig/:address/approve
GET    /governance/multisig/:address/pending
```

---

## üóÇÔ∏è Modelos de Dados (Prisma)

| Model | Prop√≥sito | Localiza√ß√£o |
|-------|-----------|-------------|
| GovernanceProposal | Armazena proposals (democracy, treasury, council, technical) | [Spec ¬ß 3.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#32-prisma-schema-extensions) |
| GovernanceVote | Registra votos (aye/nay + conviction) | [Spec ¬ß 3.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#32-prisma-schema-extensions) |
| CouncilMember | Membros do Council e Technical Committee | [Spec ¬ß 3.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#32-prisma-schema-extensions) |
| MultisigAccount | Contas multisig | [Spec ¬ß 3.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#32-prisma-schema-extensions) |
| MultisigTransaction | Transa√ß√µes pendentes multisig | [Spec ¬ß 3.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#32-prisma-schema-extensions) |

---

## üé® Componentes Frontend

| Componente | Prop√≥sito | Localiza√ß√£o |
|------------|-----------|-------------|
| GovernancePage | Dashboard geral | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| ProposalsListPage | Lista filtrada de proposals | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| ProposalDetailPage | Detalhes + vota√ß√£o | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| TreasuryPage | Treasury dashboard | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| CouncilPage | Council + Technical | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| MultisigPage | Gerenciar multisigs | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| CreateProposalPage | Criar proposta | [Spec ¬ß 4.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#43-p√°ginas-principais) |
| VoteModal | Modal de vota√ß√£o | [Spec ¬ß 4.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#44-componentes-reutiliz√°veis) |
| ConvictionSelector | Selector conviction 0-6x | [Spec ¬ß 4.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#44-componentes-reutiliz√°veis) |
| ProposalCard | Card para lista | [Spec ¬ß 4.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#44-componentes-reutiliz√°veis) |
| MultisigApprovalFlow | Fluxo de aprova√ß√£o multisig | [Spec ¬ß 4.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#44-componentes-reutiliz√°veis) |

---

## ‚öôÔ∏è Comandos √öteis

### Build & Test
```bash
# Build runtime
cd /root/bazari/bazari-chain
cargo build --release

# Test pallets
cargo test -p pallet-treasury
cargo test -p pallet-democracy
cargo test -p pallet-collective
cargo test -p pallet-multisig

# Generate chain spec
./target/release/solochain-template-node build-spec --chain local > chain-spec.json

# Start node
./target/release/solochain-template-node --chain chain-spec-raw.json
```

### Database
```bash
cd /root/bazari/apps/api

# Generate migration
pnpm prisma migrate dev --name add_governance_models

# Apply migration
pnpm prisma migrate deploy

# Generate client
pnpm prisma generate
```

### API Tests
```bash
# E2E tests
cd /root/bazari/apps/api
pnpm test:e2e governance

# Unit tests
pnpm test governance.service
```

### Frontend
```bash
cd /root/bazari/apps/web

# Run dev
pnpm dev

# Tests
pnpm test governance

# Build
pnpm build
```

---

## üìã Checklists de Valida√ß√£o

### Blockchain (Ap√≥s PROMPT 7)
- [ ] Runtime compila sem erros
- [ ] Todos os 6 pallets testados
- [ ] Testnet rodando sem crashes
- [ ] Polkadot.js mostra todos os pallets
- [ ] Genesis config correto (council members)
- [ ] Smoke tests passam

### Backend (Ap√≥s PROMPT 8)
- [ ] Migrations aplicadas
- [ ] 12 endpoints funcionando
- [ ] Event listeners sincronizando
- [ ] E2E tests passando
- [ ] Swagger docs gerados

### Frontend (Ap√≥s PROMPT 9)
- [ ] 7 p√°ginas renderizam
- [ ] 6 componentes funcionais
- [ ] API client com 12 m√©todos
- [ ] PIN integration funciona
- [ ] UI responsiva

### Docs (Ap√≥s PROMPT 10)
- [ ] Tradu√ß√µes completas (pt, en, es)
- [ ] User guide testado
- [ ] Developer guide com exemplos
- [ ] README com overview

---

## üÜò Troubleshooting R√°pido

| Problema | Poss√≠vel Causa | Solu√ß√£o | Refer√™ncia |
|----------|----------------|---------|------------|
| Runtime n√£o compila | Vers√£o incorreta dos pallets | Verificar branch polkadot-v1.0.0 | [Spec ¬ß 2.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#23-cargotoml-updates) |
| Council approval n√£o funciona | Origin incorreto | Verificar EnsureProportionAtLeast | [Spec ¬ß 2.1.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#213-pallet-collective-council--technical-committee) |
| Vote n√£o registra | Conviction inv√°lido | Usar 0-6 apenas | [Spec ¬ß 2.1.2](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#212-pallet-democracy) |
| Multisig n√£o executa | Threshold n√£o atingido | Verificar approvals count | [Spec ¬ß 5.3](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#53-multisig-operation) |
| Event listener n√£o sincroniza | Websocket desconectado | Reconectar ao node | [Spec ¬ß 3.4](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#34-blockchain-event-listeners) |
| Treasury proposal rejeitado | Bond insuficiente | M√≠nimo 100 BZR | [Spec ¬ß 2.1.1](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#211-pallet-treasury) |

---

## üìû Suporte

### Issues Conhecidos
Consultar: [Spec ¬ß 10 - Riscos](spec/FASE-07-GOVERNANCE-BLOCKCHAIN.md#10-riscos-e-mitiga√ß√µes)

### Recursos Externos
- [Substrate Docs](https://docs.substrate.io/)
- [Polkadot Wiki - Governance](https://wiki.polkadot.network/docs/learn-governance)
- [Polkadot.js Apps](https://polkadot.js.org/apps/)

---

**√öltima atualiza√ß√£o**: 2025-01-28
**Vers√£o da spec**: 1.0
