# BlockchainService - Implementation Prompt

**Phase**: P3 - Backend Integration (Week 17)
**Effort**: 1 semana
**Dependencies**: Todos os pallets P1+P2

---

## ðŸ“‹ Contexto

**Problema**: Backend nÃ£o tem conexÃ£o estruturada com blockchain

**SoluÃ§Ã£o**: `BlockchainService` NestJS com Polkadot.js API

---

## ðŸŽ¯ Objetivo

Criar `/root/bazari/apps/api/src/services/blockchain.service.ts` com:
- Polkadot.js API connection
- Event listeners (OrderCreated, ProofSubmitted, etc)
- Transaction builders (createOrder, submitProof)
- Query helpers (getOrder, getCourier)

**Output**:
- âœ… BlockchainService class
- âœ… Event listeners funcionando
- âœ… Tests passando

---

## âœ… Checklist

### Step 1: Setup Polkadot.js
```typescript
import { ApiPromise, WsProvider } from '@polkadot/api';

@Injectable()
export class BlockchainService implements OnModuleInit {
  private api: ApiPromise;

  async onModuleInit() {
    const wsProvider = new WsProvider(process.env.BLOCKCHAIN_WS);
    this.api = await ApiPromise.create({ provider: wsProvider });
    
    // Setup event listeners
    this.subscribeToEvents();
  }
}
```

### Step 2-5: Event Listeners, Transaction Builders, Queries, Tests

---

## ðŸ¤– Prompt

```
Criar BlockchainService NestJS com Polkadot.js API.

CHECKLIST:
âœ… Criar /root/bazari/apps/api/src/services/blockchain.service.ts
âœ… Setup Polkadot.js API connection (WsProvider)
âœ… Event listeners (OrderCreated, ProofSubmitted, DisputeOpened)
âœ… Transaction builders (createOrder, submitProof, registerCourier)
âœ… Query helpers (getOrder, getCourier, getDispute)
âœ… Tests (blockchain.service.spec.ts)
```

---

**Generated by**: Claude Code | **Version**: 1.0.0
