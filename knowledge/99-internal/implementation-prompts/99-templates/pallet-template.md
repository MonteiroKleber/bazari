# Pallet Template - Implementation Guide

**Purpose**: Template base para criar novos pallets Substrate

---

## ðŸ“‹ Estrutura PadrÃ£o

```
pallets/pallet-name/
â”œâ”€â”€ Cargo.toml
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ lib.rs        # Main pallet code
â”‚   â”œâ”€â”€ mock.rs       # Test runtime
â”‚   â”œâ”€â”€ tests.rs      # Unit tests
â”‚   â””â”€â”€ benchmarking.rs (optional)
```

---

## ðŸ”§ Cargo.toml Template

```toml
[package]
name = "pallet-name"
version = "0.1.0"
edition = "2021"

[dependencies]
codec = { workspace = true }
scale-info = { workspace = true }
frame-support = { workspace = true }
frame-system = { workspace = true }
sp-runtime = { workspace = true }

[dev-dependencies]
sp-core = { workspace = true, features = ["std"] }
sp-io = { workspace = true, features = ["std"] }
pallet-balances = { workspace = true, features = ["std"] }

[features]
default = ["std"]
std = [
    "codec/std",
    "scale-info/std",
    "frame-support/std",
    "frame-system/std",
    "sp-runtime/std",
]
runtime-benchmarks = [
    "frame-support/runtime-benchmarks",
    "frame-system/runtime-benchmarks",
]
try-runtime = [
    "frame-support/try-runtime",
    "frame-system/try-runtime",
]
```

---

## ðŸ“¦ lib.rs Template

```rust
#![cfg_attr(not(feature = "std"), no_std)]

pub use pallet::*;

#[cfg(test)]
mod mock;

#[cfg(test)]
mod tests;

#[frame_support::pallet]
pub mod pallet {
    use frame_support::pallet_prelude::*;
    use frame_system::pallet_prelude::*;

    #[pallet::pallet]
    pub struct Pallet<T>(_);

    #[pallet::config]
    pub trait Config: frame_system::Config {
        type RuntimeEvent: From<Event<Self>> + IsType<<Self as frame_system::Config>::RuntimeEvent>;
        type WeightInfo: WeightInfo;
    }

    // Storage
    #[pallet::storage]
    pub type Something<T: Config> = StorageValue<_, u32>;

    // Events
    #[pallet::event]
    #[pallet::generate_deposit(pub(super) fn deposit_event)]
    pub enum Event<T: Config> {
        SomethingStored { value: u32 },
    }

    // Errors
    #[pallet::error]
    pub enum Error<T> {
        StorageOverflow,
    }

    // Extrinsics
    #[pallet::call]
    impl<T: Config> Pallet<T> {
        #[pallet::call_index(0)]
        #[pallet::weight(T::WeightInfo::do_something())]
        pub fn do_something(
            origin: OriginFor<T>,
            value: u32,
        ) -> DispatchResult {
            let who = ensure_signed(origin)?;
            
            Something::<T>::put(value);
            
            Self::deposit_event(Event::SomethingStored { value });
            
            Ok(())
        }
    }

    // Weight trait
    pub trait WeightInfo {
        fn do_something() -> Weight;
    }

    impl WeightInfo for () {
        fn do_something() -> Weight {
            Weight::from_parts(10_000, 0)
        }
    }
}
```

---

## ðŸ§ª mock.rs Template

```rust
use crate as pallet_name;
use frame_support::{derive_impl, parameter_types};
use sp_runtime::BuildStorage;

type Block = frame_system::mocking::MockBlock<Test>;

frame_support::construct_runtime!(
    pub enum Test {
        System: frame_system,
        PalletName: pallet_name,
    }
);

#[derive_impl(frame_system::config_preludes::TestDefaultConfig)]
impl frame_system::Config for Test {
    type Block = Block;
    type AccountData = ();
}

impl pallet_name::Config for Test {
    type RuntimeEvent = RuntimeEvent;
    type WeightInfo = ();
}

pub fn new_test_ext() -> sp_io::TestExternalities {
    frame_system::GenesisConfig::<Test>::default()
        .build_storage()
        .unwrap()
        .into()
}
```

---

## âœ… tests.rs Template

```rust
use crate::{mock::*, Error, Event};
use frame_support::{assert_noop, assert_ok};

#[test]
fn it_works() {
    new_test_ext().execute_with(|| {
        assert_ok!(PalletName::do_something(RuntimeOrigin::signed(1), 42));
        
        System::assert_last_event(
            Event::SomethingStored { value: 42 }.into()
        );
    });
}

#[test]
fn it_fails() {
    new_test_ext().execute_with(|| {
        assert_noop!(
            PalletName::do_something(RuntimeOrigin::signed(1), u32::MAX),
            Error::<Test>::StorageOverflow
        );
    });
}
```

---

**Generated by**: Claude Code | **Version**: 1.0.0
